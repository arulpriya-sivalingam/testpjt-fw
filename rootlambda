EventBridgeInvokeLambdaPolicy:
  Type: AWS::IAM::ManagedPolicy
  Properties:
    ManagedPolicyName: !Sub "${EventRuleName}-invoke-lambda"
    PolicyDocument:
      Version: '2012-10-17'
      Statement:
        - Effect: Allow
          Action:
            - lambda:InvokeFunction
          Resource: !Ref LambdaArn
    Roles:
      - !Ref EventBridgeInvokeLambdaRole

EventBridgeInvokeLambdaRole:
  Type: AWS::IAM::Role
  Properties:
    AssumeRolePolicyDocument:
      Version: '2012-10-17'
      Statement:
        - Effect: Allow
          Principal:
            Service: events.amazonaws.com
          Action: sts:AssumeRole
    Tags:
      - Key: Application
        Value: DNS-VPC-Automation


  AllowEventBridgeInvokeLambda:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName: !Ref LambdaArn
      Principal: events.amazonaws.com
      SourceArn: !GetAtt VPCCreateRuleToNetwork.Arn
